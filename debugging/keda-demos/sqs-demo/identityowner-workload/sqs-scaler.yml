apiVersion: keda.sh/v1alpha1
kind: TriggerAuthentication
metadata:
  name: sqs-pod-identityowner-trigger-auth
spec:
  podIdentity:
      provider: aws # Optional. Default: none
      # roleArn: "arn:aws:iam::622268126582:role/keda-nginxdemo-role-tig-6351"                                                 # Optional. Only used by aws provider.
      # identityOwner: keda
      # roleArn: "arn:aws:iam::622268126582:role/keda-operator-role-tig-6351"                                                 # Optional. Only used by aws provider.
      identityOwner: workload 

---
apiVersion: keda.sh/v1alpha1
kind: ScaledObject
metadata:
  name: sqsconsumer-hpa
spec:
  scaleTargetRef:
    name: nginx-deployment-pod-sa
  minReplicaCount: 0
  maxReplicaCount: 10
  pollingInterval: 10 
  cooldownPeriod:  10 
  triggers:
  - type: aws-sqs-queue
    metadata:
      queueURL: https://sqs.us-east-1.amazonaws.com/545444110299/keda_poc_queue
      activationQueueLength: "0"
      queueLength: "2"
      awsRegion: us-east-1
      identityOwner: pod
    authenticationRef:
      name: "sqs-pod-identityowner-trigger-auth"
